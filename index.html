<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>
        <div class="cart-icon" id="cart-icon">
            <span>üõí</span>
            <div class="cart-count" id="cart-count">0</div>
        </div>
        
        <div class="cart" id="cart">
            <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <ul id="cart-list"></ul>
        </div>

        <div class="product">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSergYyKtwZo-1wTXTYEIu6f6AbD-Pcfy98A&s" alt="–ï–±–ª–∞–Ω" class="product-image">
            <h2>–ï–±–ª–∞–Ω</h2>
            <p>–¶–µ–Ω–∞: <span class="product-price">1000‚ÇΩ</span></p>
            <button class="buy-button" data-product="–ï–±–ª–∞–Ω" data-price="1000">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        <div class="product">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPRbAPPW_QVO9CeKIh9NAOe-s6NEpkJZIPlQ&s" alt="–ü–µ—Å–ø–∞—Ç—Ä–æ–Ω" class="product-image">
            <h2>–ü–µ—Å–ø–∞—Ç—Ä–æ–Ω</h2>
            <p>–¶–µ–Ω–∞: <span class="product-price">1500‚ÇΩ</span></p>
            <button class="buy-button" data-product="–ü–µ—Å–ø–∞—Ç—Ä–æ–Ω" data-price="1500">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        <div class="product">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7YEvCAAioqvnAqYiHCTk6BjbPhIyowDLCKQ&s" alt="–°–∏–≥–º–∞" class="product-image">
            <h2>–°–∏–≥–º–∞</h2>
            <p>–¶–µ–Ω–∞: <span class="product-price">2000‚ÇΩ</span></p>
            <button class="buy-button" data-product="–°–∏–≥–º–∞" data-price="2000">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
    </div>

    <script>
        const cart = {};
        const cartIcon = document.getElementById('cart-icon');
        const cartCount = document.getElementById('cart-count');
        const cartList = document.getElementById('cart-list');
        const cartDisplay = document.getElementById('cart');

        cartIcon.addEventListener('click', function() {
            cartDisplay.classList.toggle('visible');
        });

        document.querySelectorAll('.buy-button').forEach(button => {
            button.addEventListener('click', function() {
                const productName = this.getAttribute('data-product');
                const productPrice = this.getAttribute('data-price');
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
                if (!cart[productName]) {
                    cart[productName] = { quantity: 1, price: productPrice };
                } else {
                    cart[productName].quantity++;
                }
                updateCart();

                // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
                sendTelegramMessage(productName, cart[productName].quantity, productPrice);
            });
        });

        function updateCart() {
            let totalItems = 0; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤
            cartList.innerHTML = '';

            for (const [item, { quantity, price }] of Object.entries(cart)) {
                const li = document.createElement('li');
                li.textContent = `${item} (x${quantity}) - –¶–µ–Ω–∞: ${price}‚ÇΩ`;

                const removeButton = document.createElement('button');
                removeButton.textContent = '–£–±—Ä–∞—Ç—å';
                removeButton.className = 'remove-button';
                removeButton.addEventListener('click', function() {
                    removeFromCart(item);
                });

                li.appendChild(removeButton);
                cartList.appendChild(li);
                totalItems += quantity; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
            }

            cartCount.textContent = totalItems; // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
        }

        function removeFromCart(item) {
            if (cart[item].quantity > 1) {
                cart[item].quantity--; // –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
            } else {
                delete cart[item]; // –£–±–∏—Ä–∞–µ–º —Ç–æ–≤–∞—Ä, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 0
            }
            updateCart();

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –æ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
            sendTelegramMessage(item, cart[item]?.quantity || 0, cart[item]?.price || 0); 
        }

        function sendTelegramMessage(product, quantity, price) {
            const message = quantity > 0
                ? `–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É: ${product} - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${quantity} - –¶–µ–Ω–∞: ${price}‚ÇΩ`
                : `–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã: ${product}`;

            fetch('https://api.telegram.org/bot7897063802:AAGBI-llXySgb7x8HwvM9OErMkTXrbuNers/sendMessage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    chat_id: '2021106626',
                    text: message
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
            });
        }
    </script>
</body>
</html>